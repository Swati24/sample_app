<% unless @articles.count == 0 %>
  <h2>Articles to be published</h2>
  <div class="span8">
  <div class="table-responsive">
  <table class="table table-condensed  table-striped">
    <thead>
      <tr>
      <th>Title</th>
      <th>Content</th>
      <th>User</th>
      <th></th>
    </tr>
  </thead>
  <tbody>

  <% @articles.each do |article| %>
    <tr>
      <td><%= link_to article.title, article %></td>
      <td><%=h truncate(article.content, length: 30) %></td>
      <td><%= article.user.try(:name) %></td>
      <% if can? :publish, article %>
        <td><%= button_to 'Publish', publish_article_path(article), :method => :put, :class => 'btn btn-success' %></td>
      <% end %>
    </tr>
  <% end %>
   </tbody>
  </table>
  <%= link_to 'New Article', new_article_path, :class => 'btn btn-primary' if current_user %>
  </div>
  </div>
<% else %>
  <h4>All articles are published!!</h4>
<% end %>

<%= will_paginate @articles %>
